(()=>{"use strict";let t,e,a,r,o,d="hori",l=1;function s(t){if(6===l)return;const e=parseInt(t.getAttribute("data-x")),a=parseInt(t.getAttribute("data-y"));let r=document.querySelector(`.modalCell[data-x="${e+1}"][data-y="${a}"]`),o=document.querySelector(`.modalCell[data-x="${e+2}"][data-y="${a}"]`),s=document.querySelector(`.modalCell[data-x="${e+3}"][data-y="${a}"]`),i=document.querySelector(`.modalCell[data-x="${e+4}"][data-y="${a}"]`);"vert"===d&&(r=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+1}"]`),o=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+2}"]`),s=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+3}"]`),i=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+4}"]`));let n=[t,r,o,s,i];n=c(n);let u=!0,m=!1;n.forEach((t=>{t?t.classList.contains("occupied")&&(m=!0):u=!1})),u?(m&&t.classList.remove("placeError"),n.forEach((t=>{t.classList.remove("placeHover")})),t.firstChild&&t.classList.remove("alreadyPlacedError")):t.classList.remove("placeError")}function c(t){return 1===l?t:2===l?t.slice(0,4):3===l||4==l?t.slice(0,3):5===l?t.slice(0,2):void 0}const i=class{constructor(t){this.name=t,this.ships=[],this.gameboard=new class{constructor(){this.board=this.#t(),this.missed=[],this.ships=[]}#t(){let t=[];for(let e=0;e<10;e++){let e=[];for(let t=0;t<10;t++)e.push({isHit:!1,hasShip:!1});t.push(e)}return t}placeShip(t,e,a,r){if(this.#e(e,a,t,r)){const o=[];for(let d=0;d<t;d++)"hori"===r&&(o.push([e+d,a]),this.board[a][e+d].hasShip=!0),"vert"===r&&(o.push([e,a+d]),this.board[a+d][e].hasShip=!0);const d=new class{constructor(t,e){this.name=t,this.location=e,this.hits=[]}hit(t){this.hits.push(t)}isSunk(){return this.location.sort().toString()===this.hits.sort().toString()}}("ship",o);return this.ships.push(d),d}return"Not a valid spot"}recieveAttack(t,e){if(this.board[e][t].hasShip){let a;for(let r=0;r<this.ships.length;r++)this.#a(this.ships[r].location,[t,e])&&(a=this.ships[r]);return a.hit([t,e]),this.board[e][t].isHit=!0,a.hits}return this.missed.push([t,e]),this.board[e][t].isHit=!0,this.missed}allShipsSunk(){let t=!0;return this.ships.forEach((e=>{e.isSunk()||(t=!1)})),t}#e(t,e,a,r){let o=!0;for(let d=0;d<a;d++)"hori"===r&&(0<=t+d&&t+d<10&&0<=e&&e<10?this.ships.forEach((a=>{this.#a(a.location,[t+d,e])&&(o=!1)})):o=!1),"vert"===r&&(0<=t&&t<10&&0<=e+d&&e+d<10?this.ships.forEach((a=>{this.#a(a.location,[t,e+d])&&(o=!0)})):o=!1);return o}#a(t,e){const a=JSON.stringify(e);return t.some((function(t){return JSON.stringify(t)===a}))}}}attack(t,e,a){if(a.board[e][t].isHit)return"You already shot there";a.recieveAttack(t,e)}autoAttack(t){const e=Math.round(7*Math.random()),a=Math.round(7*Math.random());t.board[a][e].isHit?autoAttack(t):t.recieveAttack(e,a)}},n=()=>Math.floor(10*Math.random());document.querySelectorAll(".board").forEach((t=>{for(let e=0;e<10;e++){let a=document.createElement("div");for(let r=0;r<10;r++){let o=document.createElement("div");o.classList.add("cell"),t.classList.contains("opponent")&&o.classList.add("oppCell"),t.classList.contains("player")&&o.classList.add("userCell"),t.classList.contains("modalBoard")&&o.classList.add("modalCell"),o.dataset.x=r,o.dataset.y=e,a.appendChild(o)}a.classList.add("row"),t.appendChild(a)}})),function(){new i("user");const t=new i("AI");let e=5;for(;5!==t.gameboard.ships.length;){const a=n(),r=n(),o=0===Math.round(Math.random())?"hori":"vert";1===t.gameboard.ships.length&&(e=4),2===t.gameboard.ships.length&&(e=3),3===t.gameboard.ships.length&&(e=3),4===t.gameboard.ships.length&&(e=2),t.gameboard.placeShip(e,a,r,o)}}(),(()=>{document.querySelectorAll(".modalCell").forEach((i=>{i.addEventListener("mouseenter",(()=>function(t){if(6===l)return;if(t.firstChild)return void t.classList.add("alreadyPlacedError");const e=parseInt(t.getAttribute("data-x")),a=parseInt(t.getAttribute("data-y"));let r=document.querySelector(`.modalCell[data-x="${e+1}"][data-y="${a}"]`),o=document.querySelector(`.modalCell[data-x="${e+2}"][data-y="${a}"]`),s=document.querySelector(`.modalCell[data-x="${e+3}"][data-y="${a}"]`),i=document.querySelector(`.modalCell[data-x="${e+4}"][data-y="${a}"]`);"vert"===d&&(r=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+1}"]`),o=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+2}"]`),s=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+3}"]`),i=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+4}"]`));let n=[t,r,o,s,i];n=c(n);let u=!0;n.forEach((t=>{t?t.classList.contains("occupied")&&(u=!1):u=!1})),u?n.forEach((t=>{t.classList.add("placeHover")})):t.classList.add("placeError")}(i))),i.addEventListener("mouseleave",(()=>s(i))),i.addEventListener("click",(()=>function(c){if(1===l){const e=parseInt(c.getAttribute("data-x")),a=parseInt(c.getAttribute("data-y"));let r=document.querySelector(`.modalCell[data-x="${e+1}"][data-y="${a}"]`),o=document.querySelector(`.modalCell[data-x="${e+2}"][data-y="${a}"]`),i=document.querySelector(`.modalCell[data-x="${e+3}"][data-y="${a}"]`),n=document.querySelector(`.modalCell[data-x="${e+4}"][data-y="${a}"]`);if("vert"===d&&(r=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+1}"]`),o=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+2}"]`),i=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+3}"]`),n=document.querySelector(`.modalCell[data-x="${e}"][data-y="${a+4}"]`)),!(r&&o&&i&&n))return;const u=[c,r,o,i,n];let m=!1;if(u.forEach((t=>{t.classList.contains("occupied")&&(m=!0)})),m)return;const h=document.createElement("img");return h.classList.add("carrier"),"vert"===d&&h.classList.add("vertical"),h.src="./resources/carrier.png",c.appendChild(h),u.forEach((t=>{t.classList.add("occupied")})),s(c),l++,document.querySelector(".modalTitle").textContent="PLACE YOUR BATTLESHIP",void(t=[e,a,d,5])}if(2===l){const t=parseInt(c.getAttribute("data-x")),a=parseInt(c.getAttribute("data-y"));let r=document.querySelector(`.modalCell[data-x="${t+1}"][data-y="${a}"]`),o=document.querySelector(`.modalCell[data-x="${t+2}"][data-y="${a}"]`),i=document.querySelector(`.modalCell[data-x="${t+3}"][data-y="${a}"]`);if("vert"===d&&(r=document.querySelector(`.modalCell[data-x="${t}"][data-y="${a+1}"]`),o=document.querySelector(`.modalCell[data-x="${t}"][data-y="${a+2}"]`),i=document.querySelector(`.modalCell[data-x="${t}"][data-y="${a+3}"]`)),!r||!o||!i)return;const n=[c,r,o,i];let u=!1;if(n.forEach((t=>{t.classList.contains("occupied")&&(u=!0)})),u)return;const m=document.createElement("img");return m.classList.add("battleship"),"vert"===d&&m.classList.add("vertical"),m.src="./resources/battleship.png",c.appendChild(m),n.forEach((t=>{t.classList.add("occupied")})),s(c),l++,document.querySelector(".modalTitle").textContent="PLACE YOUR CRUISER",void(e=[t,a,d,4])}if(3===l){const t=parseInt(c.getAttribute("data-x")),e=parseInt(c.getAttribute("data-y"));let r=document.querySelector(`.modalCell[data-x="${t+1}"][data-y="${e}"]`),o=document.querySelector(`.modalCell[data-x="${t+2}"][data-y="${e}"]`);if("vert"===d&&(r=document.querySelector(`.modalCell[data-x="${t}"][data-y="${e+1}"]`),o=document.querySelector(`.modalCell[data-x="${t}"][data-y="${e+2}"]`)),!r||!o)return;const i=[c,r,o];let n=!1;if(i.forEach((t=>{t.classList.contains("occupied")&&(n=!0)})),n)return;const u=document.createElement("img");return u.classList.add("cruiser"),"vert"===d&&u.classList.add("vertical"),u.src="./resources/cruiser.png",c.appendChild(u),i.forEach((t=>{t.classList.add("occupied")})),s(c),l++,document.querySelector(".modalTitle").textContent="PLACE YOUR SUBMARINE",void(a=[t,e,d,3])}if(4===l){const t=parseInt(c.getAttribute("data-x")),e=parseInt(c.getAttribute("data-y"));let a=document.querySelector(`.modalCell[data-x="${t+1}"][data-y="${e}"]`),o=document.querySelector(`.modalCell[data-x="${t+2}"][data-y="${e}"]`);if("vert"===d&&(a=document.querySelector(`.modalCell[data-x="${t}"][data-y="${e+1}"]`),o=document.querySelector(`.modalCell[data-x="${t}"][data-y="${e+2}"]`)),!a||!o)return;const i=[c,a,o];let n=!1;if(i.forEach((t=>{t.classList.contains("occupied")&&(n=!0)})),n)return;const u=document.createElement("img");return u.classList.add("submarine"),"vert"===d&&u.classList.add("vertical"),u.src="./resources/submarine.png",c.appendChild(u),i.forEach((t=>{t.classList.add("occupied")})),s(c),l++,document.querySelector(".modalTitle").textContent="PLACE YOUR DESTROYER",void(r=[t,e,d,3])}if(5===l){const t=parseInt(c.getAttribute("data-x")),e=parseInt(c.getAttribute("data-y"));let a=document.querySelector(`.modalCell[data-x="${t+1}"][data-y="${e}"]`);if("vert"===d&&(a=document.querySelector(`.modalCell[data-x="${t}"][data-y="${e+1}"]`)),!a)return;const r=[c,a];let i=!1;if(r.forEach((t=>{t.classList.contains("occupied")&&(i=!0)})),i)return;const n=document.createElement("img");return n.classList.add("destroyer"),"vert"===d&&n.classList.add("vertical"),n.src="./resources/destroyer.png",c.appendChild(n),r.forEach((t=>{t.classList.add("occupied")})),s(c),l++,void(o=[t,e,d,2])}}(i)))}));const i=document.querySelector(".changeAxis");i.addEventListener("click",(()=>{"X"===i.textContent.charAt(6)?(i.textContent="AXIS: Y",d="vert"):(i.textContent="AXIS: X",d="hori")}))})()})();